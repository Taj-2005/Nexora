module.exports=[35112,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactDOM},96628,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(19817);function f({children:a,requiredRole:f,fallback:h=null}){let i=(0,d.useRouter)(),j=(0,d.usePathname)(),{user:k,isAuthenticated:l,isInitialized:m,isLoading:n}=(0,e.useAuth)(),o=!f||!!k&&(Array.isArray(f)?f:[f]).includes(k.role);return((0,c.useEffect)(()=>{if(m){if(!l)return void i.replace(`/login?redirect=${encodeURIComponent(j??"/")}`);if(!o)return void i.replace(k?.role==="customer"?"/home":"/admin")}},[m,l,o,j,i,k?.role]),m&&!n&&l&&o)?(0,b.jsx)(b.Fragment,{children:a}):h??(0,b.jsx)(g,{})}function g(){return(0,b.jsxs)("div",{className:"flex min-h-[50vh] items-center justify-center bg-muted/30",children:[(0,b.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-accent border-t-transparent","aria-hidden":!0}),(0,b.jsx)("span",{className:"sr-only",children:"Loading…"})]})}a.s(["ProtectedRoute",()=>f])},15468,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(71987),f=a.i(96628),g=a.i(36411),h=a.i(81448);function i(a){return`₹${a.toLocaleString("en-IN")}`}function j({order:a}){let[f,g]=(0,c.useState)(!1),h=a.status?.toLowerCase()??"pending";return(0,b.jsxs)("div",{className:"rounded-[var(--radius-lg)] border border-border bg-surface overflow-hidden",children:[(0,b.jsxs)("button",{type:"button",onClick:()=>g(a=>!a),className:"flex w-full items-center justify-between gap-4 p-4 text-left hover:bg-muted/50 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:ring-accent",children:[(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsxs)("p",{className:"font-heading font-semibold text-primary",children:[a.id.slice(0,8),"…"]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:new Date(a.createdAt).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3 shrink-0",children:[(0,b.jsx)("span",{className:"rounded-full px-2.5 py-0.5 text-xs font-medium capitalize bg-muted text-muted-foreground",children:h}),(0,b.jsx)("span",{className:"font-semibold text-primary",children:i(a.total)}),(0,b.jsx)("span",{className:"text-muted-foreground","aria-hidden":!0,children:f?"▼":"▶"})]})]}),f&&(0,b.jsxs)("div",{className:"border-t border-border p-4 space-y-4",children:[(0,b.jsx)("ul",{className:"space-y-2",children:a.items?.map(a=>(0,b.jsxs)("li",{className:"flex gap-3 text-sm",children:[a.product?.image&&(0,b.jsx)("div",{className:"relative h-12 w-12 shrink-0 overflow-hidden rounded bg-muted",children:(0,b.jsx)(e.default,{src:a.product.image,alt:a.product?.name??"",fill:!0,className:"object-cover"})}),(0,b.jsxs)("div",{className:"min-w-0",children:[(0,b.jsx)("p",{className:"font-medium text-primary",children:a.product?.name??"Item"}),(0,b.jsxs)("p",{className:"text-muted-foreground",children:["Qty: ",a.quantity," × ",i(a.price)]})]})]},a.id))}),(0,b.jsx)(d.default,{href:"/shop",className:"inline-block rounded-[var(--radius-sm)] bg-accent px-3 py-2 text-sm font-medium text-on-accent hover:bg-accent/90",children:"Order again"})]})]})}function k(){let[a,e]=(0,c.useState)([]),[f,i]=(0,c.useState)(!0),[k,l]=(0,c.useState)(null);return((0,c.useEffect)(()=>{h.apiClient.get("/api/orders").then(a=>a.data).then(a=>{a.success&&a.data&&e(a.data)}).catch(()=>l("Failed to load orders")).finally(()=>i(!1))},[]),f)?(0,b.jsx)("div",{className:"flex min-h-[200px] items-center justify-center",children:(0,b.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-accent border-t-transparent","aria-hidden":!0})}):k?(0,b.jsx)(g.Container,{as:"div",className:"py-8 lg:py-12",children:(0,b.jsx)("div",{className:"rounded-[var(--radius-lg)] border border-[var(--color-error)] bg-[var(--color-error)]/10 p-6 text-[var(--color-error)]",children:k})}):(0,b.jsxs)(g.Container,{as:"div",className:"py-8 lg:py-12",children:[(0,b.jsx)("h1",{className:"font-heading text-3xl font-bold tracking-tight text-primary",children:"Order history"}),(0,b.jsx)("p",{className:"mt-2 text-muted-foreground",children:"View and manage your orders."}),0===a.length?(0,b.jsxs)("div",{className:"mt-12 rounded-[var(--radius-lg)] border border-border bg-surface py-16 text-center",children:[(0,b.jsx)("p",{className:"text-muted-foreground",children:"You haven’t placed any orders yet."}),(0,b.jsx)(d.default,{href:"/shop",className:"mt-6 inline-flex h-12 items-center justify-center rounded-[var(--radius)] bg-accent px-6 text-sm font-medium text-on-accent hover:bg-accent/90",children:"Start shopping"})]}):(0,b.jsx)("ul",{className:"mt-8 space-y-4",role:"list",children:a.map(a=>(0,b.jsx)("li",{children:(0,b.jsx)(j,{order:a})},a.id))})]})}function l(){return(0,b.jsx)(f.ProtectedRoute,{children:(0,b.jsx)(k,{})})}a.s(["default",()=>l],15468)}];

//# sourceMappingURL=_92dd8a79._.js.map