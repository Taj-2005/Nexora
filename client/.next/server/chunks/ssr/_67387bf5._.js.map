{"version":3,"sources":["../../../../components/ui/button.tsx","../../../../components/auth/protected-route.tsx","../../../../app/profile/page.tsx"],"sourcesContent":["import type { ButtonHTMLAttributes } from \"react\";\n\ntype ButtonVariant = \"primary\" | \"secondary\" | \"ghost\" | \"outline\";\n\ninterface ButtonProps extends ButtonHTMLAttributes<HTMLButtonElement> {\n  variant?: ButtonVariant;\n  size?: \"sm\" | \"md\" | \"lg\";\n}\n\nconst variantClasses: Record<ButtonVariant, string> = {\n  primary:\n    \"bg-accent text-on-accent hover:bg-accent/90 active:bg-accent/80 focus-visible:ring-accent\",\n  secondary:\n    \"bg-muted text-primary hover:bg-muted/80 active:bg-muted/70 focus-visible:ring-accent\",\n  ghost:\n    \"text-primary hover:bg-muted active:bg-muted/80 focus-visible:ring-accent\",\n  outline:\n    \"border-2 border-border bg-surface text-primary hover:bg-muted focus-visible:ring-accent\",\n};\n\nconst sizeClasses = {\n  sm: \"h-10 px-4 text-sm rounded-[var(--radius-sm)]\",\n  md: \"h-12 px-6 text-base rounded-[var(--radius)]\",\n  lg: \"h-14 px-8 text-lg rounded-[var(--radius)]\",\n};\n\nexport function Button({\n  variant = \"primary\",\n  size = \"md\",\n  className = \"\",\n  children,\n  ...props\n}: ButtonProps) {\n  return (\n    <button\n      type=\"button\"\n      className={`inline-flex items-center justify-center font-medium transition-colors focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 disabled:pointer-events-none disabled:opacity-50 ${variantClasses[variant]} ${sizeClasses[size]} ${className}`}\n      {...props}\n    >\n      {children}\n    </button>\n  );\n}\n","\"use client\";\n\nimport { useEffect, type ReactNode } from \"react\";\nimport { useRouter, usePathname } from \"next/navigation\";\nimport { useAuth } from \"@/context/auth-context\";\nimport type { UserRole } from \"@/types/auth\";\n\ntype ProtectedRouteProps = {\n  children: ReactNode;\n  requiredRole?: UserRole | UserRole[];\n  fallback?: ReactNode;\n};\n\nexport function ProtectedRoute({\n  children,\n  requiredRole,\n  fallback = null,\n}: ProtectedRouteProps) {\n  const router = useRouter();\n  const pathname = usePathname();\n  const { user, isAuthenticated, isInitialized, isLoading } = useAuth();\n\n  const allowed = (() => {\n    if (!requiredRole) return true;\n    if (!user) return false;\n    const roles = Array.isArray(requiredRole) ? requiredRole : [requiredRole];\n    return roles.includes(user.role);\n  })();\n\n  useEffect(() => {\n    if (!isInitialized) return;\n    if (!isAuthenticated) {\n      router.replace(`/login?redirect=${encodeURIComponent(pathname ?? \"/\")}`);\n      return;\n    }\n    if (!allowed) {\n      router.replace(user?.role === \"customer\" ? \"/home\" : \"/admin\");\n      return;\n    }\n  }, [isInitialized, isAuthenticated, allowed, pathname, router, user?.role]);\n\n  if (!isInitialized || isLoading) {\n    return fallback ?? <ProtectedRouteSkeleton />;\n  }\n  if (!isAuthenticated || !allowed) {\n    return fallback ?? <ProtectedRouteSkeleton />;\n  }\n  return <>{children}</>;\n}\n\nexport function ProtectedRouteSkeleton() {\n  return (\n    <div className=\"flex min-h-[50vh] items-center justify-center bg-muted/30\">\n      <div className=\"h-8 w-8 animate-spin rounded-full border-2 border-accent border-t-transparent\" aria-hidden />\n      <span className=\"sr-only\">Loadingâ€¦</span>\n    </div>\n  );\n}\n\nexport function AdminRoute({ children, fallback }: { children: ReactNode; fallback?: ReactNode }) {\n  return (\n    <ProtectedRoute requiredRole={[\"admin\", \"super_admin\"]} fallback={fallback}>\n      {children}\n    </ProtectedRoute>\n  );\n}\n\nexport function SuperAdminRoute({ children, fallback }: { children: ReactNode; fallback?: ReactNode }) {\n  return (\n    <ProtectedRoute requiredRole=\"super_admin\" fallback={fallback}>\n      {children}\n    </ProtectedRoute>\n  );\n}\n","\"use client\";\n\nimport { useState } from \"react\";\nimport { useAuth } from \"@/context/auth-context\";\nimport { ProtectedRoute } from \"@/components/auth/protected-route\";\nimport { Container } from \"@/components/layout/container\";\nimport { Button } from \"@/components/ui/button\";\n\nfunction ProfileContent() {\n  const { user } = useAuth();\n  const [fullName, setFullName] = useState(user?.fullName ?? \"\");\n  const [saved, setSaved] = useState(false);\n\n  const handleSaveProfile = (e: React.FormEvent) => {\n    e.preventDefault();\n    setSaved(true);\n    setTimeout(() => setSaved(false), 3000);\n  };\n\n  return (\n    <Container as=\"div\" className=\"py-8 lg:py-12\">\n      <h1 className=\"font-heading text-3xl font-bold tracking-tight text-primary\">\n        Profile\n      </h1>\n      <p className=\"mt-2 text-muted-foreground\">\n        Manage your account and preferences.\n      </p>\n\n      <div className=\"mt-8 grid gap-8 lg:grid-cols-3\">\n        <section\n          className=\"rounded-[var(--radius-lg)] border border-border bg-surface p-6 lg:col-span-2\"\n          aria-labelledby=\"profile-heading\"\n        >\n          <h2 id=\"profile-heading\" className=\"font-heading text-xl font-semibold text-primary\">\n            Edit profile\n          </h2>\n          <form onSubmit={handleSaveProfile} className=\"mt-6 space-y-4\">\n            <div>\n              <label htmlFor=\"profile-email\" className=\"block text-sm font-medium text-primary\">\n                Email\n              </label>\n              <input\n                id=\"profile-email\"\n                type=\"email\"\n                value={user?.email ?? \"\"}\n                disabled\n                className=\"mt-1 block w-full rounded-[var(--radius-sm)] border border-border bg-muted px-4 py-3 text-muted-foreground\"\n              />\n              <p className=\"mt-1 text-xs text-muted-foreground\">Email cannot be changed.</p>\n            </div>\n            <div>\n              <label htmlFor=\"profile-name\" className=\"block text-sm font-medium text-primary\">\n                Full name\n              </label>\n              <input\n                id=\"profile-name\"\n                type=\"text\"\n                value={fullName}\n                onChange={(e) => setFullName(e.target.value)}\n                className=\"mt-1 block w-full rounded-[var(--radius-sm)] border border-border bg-surface px-4 py-3 text-primary focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:ring-accent\"\n              />\n            </div>\n            <Button type=\"submit\" disabled={saved}>\n              {saved ? \"Saved\" : \"Save changes\"}\n            </Button>\n          </form>\n        </section>\n\n        <aside className=\"space-y-6\">\n          <section\n            className=\"rounded-[var(--radius-lg)] border border-border bg-surface p-6\"\n            aria-labelledby=\"password-heading\"\n          >\n            <h2 id=\"password-heading\" className=\"font-heading text-lg font-semibold text-primary\">\n              Change password\n            </h2>\n            <p className=\"mt-2 text-sm text-muted-foreground\">\n              Update your password from the security page.\n            </p>\n            <a\n              href=\"/login\"\n              className=\"mt-4 inline-flex h-12 items-center justify-center rounded-[var(--radius)] border-2 border-border bg-surface px-6 font-medium text-primary hover:bg-muted focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:ring-accent\"\n            >\n              Go to login\n            </a>\n          </section>\n\n          <section\n            className=\"rounded-[var(--radius-lg)] border border-border bg-surface p-6\"\n            aria-labelledby=\"address-heading\"\n          >\n            <h2 id=\"address-heading\" className=\"font-heading text-lg font-semibold text-primary\">\n              Addresses\n            </h2>\n            <p className=\"mt-2 text-sm text-muted-foreground\">\n              No saved addresses. Add one at checkout.\n            </p>\n          </section>\n        </aside>\n      </div>\n    </Container>\n  );\n}\n\nexport default function ProfilePage() {\n  return (\n    <ProtectedRoute>\n      <ProfileContent />\n    </ProtectedRoute>\n  );\n}\n"],"names":[],"mappings":"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"}