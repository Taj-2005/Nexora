{"version":3,"sources":["../../../../app/admin/page.tsx","../../../../api/admin.api.ts"],"sourcesContent":["\"use client\";\n\nimport { useMemo, useState, useEffect } from \"react\";\nimport { adminApi } from \"@/api/admin.api\";\n\nfunction StatCard({\n  title,\n  value,\n  subtitle,\n  format = (v: number) => String(v),\n}: {\n  title: string;\n  value: number;\n  subtitle?: string;\n  format?: (v: number) => string;\n}) {\n  return (\n    <div className=\"rounded-[var(--radius-lg)] border border-border bg-surface p-5 shadow-sm\">\n      <p className=\"text-sm font-medium text-muted-foreground\">{title}</p>\n      <p className=\"mt-1 font-heading text-2xl font-bold text-primary\">{format(value)}</p>\n      {subtitle && <p className=\"mt-1 text-xs text-muted-foreground\">{subtitle}</p>}\n    </div>\n  );\n}\n\nexport default function AdminDashboardPage() {\n  const [data, setData] = useState<{ users: number; products: number; orders: number; revenue: number } | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    adminApi\n      .getDashboard()\n      .then((res) => res.success && res.data && setData(res.data))\n      .catch(() => setError(\"Failed to load dashboard\"))\n      .finally(() => setLoading(false));\n  }, []);\n\n  if (loading) {\n    return (\n      <div className=\"flex min-h-[40vh] items-center justify-center\">\n        <div className=\"h-8 w-8 animate-spin rounded-full border-2 border-accent border-t-transparent\" aria-hidden />\n      </div>\n    );\n  }\n\n  if (error || !data) {\n    return (\n      <div className=\"rounded-[var(--radius-lg)] border border-[var(--color-error)] bg-[var(--color-error)]/10 p-6 text-[var(--color-error)]\">\n        {error ?? \"No data\"}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-8\">\n      <div>\n        <h1 className=\"font-heading text-2xl font-bold tracking-tight text-primary\">\n          Dashboard\n        </h1>\n        <p className=\"mt-1 text-muted-foreground\">\n          Overview of your store performance.\n        </p>\n      </div>\n\n      <section aria-labelledby=\"stats-heading\">\n        <h2 id=\"stats-heading\" className=\"sr-only\">\n          Key metrics\n        </h2>\n        <div className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-4\">\n          <StatCard\n            title=\"Total Revenue\"\n            value={data.revenue}\n            format={(v) => `â‚¹${v.toLocaleString(\"en-IN\")}`}\n          />\n          <StatCard title=\"Total Orders\" value={data.orders} />\n          <StatCard title=\"Active Users\" value={data.users} />\n          <StatCard title=\"Products\" value={data.products} />\n        </div>\n      </section>\n    </div>\n  );\n}\n","\"use client\";\n\nimport { apiClient } from \"./axios\";\n\nexport type DashboardData = {\n  users: number;\n  products: number;\n  orders: number;\n  revenue: number;\n};\n\nexport type ApiResponse<T> = { success: boolean; data: T };\n\nexport const adminApi = {\n  getDashboard: () =>\n    apiClient.get<ApiResponse<DashboardData>>(\"/api/admin/dashboard\").then((r) => r.data),\n\n  getRevenue: () =>\n    apiClient.get<ApiResponse<{ total: number }>>(\"/api/admin/revenue\").then((r) => r.data),\n\n  getUsersStats: () =>\n    apiClient.get<ApiResponse<{ total: number; byRole: { roleId: string; roleName: string; count: number }[] }>>(\"/api/admin/users/stats\").then((r) => r.data),\n\n  getProductsStats: () =>\n    apiClient.get<ApiResponse<{ total: number; active: number }>>(\"/api/admin/products/stats\").then((r) => r.data),\n\n  getOrdersStats: () =>\n    apiClient.get<ApiResponse<{ status: string; _count: number }[]>>(\"/api/admin/orders/stats\").then((r) => r.data),\n\n  createAdmin: (data: { email: string; password: string; fullName?: string }) =>\n    apiClient.post<ApiResponse<{ id: string; email: string; fullName: string; role: unknown }>>(\"/api/admin/create-admin\", data).then((r) => r.data),\n\n  getLogs: (limit?: number) =>\n    apiClient.get<ApiResponse<unknown[]>>(\"/api/admin/logs\", { params: { limit } }).then((r) => r.data),\n};\n"],"names":[],"mappings":"wDAEA,EAAA,EAAA,CAAA,CAAA,OCAA,EAAA,EAAA,CAAA,CAAA,ODGA,SAAS,EAAS,OAChB,CAAK,OACL,CAAK,UACL,CAAQ,QACR,EAAS,AAAC,GAAc,OAAO,EAAE,CAMlC,EACC,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qFACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,qDAA6C,IAC1D,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,6DAAqD,EAAO,KACxE,GAAY,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,8CAAsC,MAGtE,CAEe,SAAS,IACtB,GAAM,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAA8E,MACxG,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjC,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAgB,YAUlD,CARA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KCfR,ADgBA,EChBA,ODiBG,ECjBM,CAAC,GAAG,CAA6B,KDiB3B,mBCjBmD,IAAI,CAAC,AAAC,GAAM,EAAE,IAAI,EDkBjF,IAAI,CAAC,AAAC,GAAQ,EAAI,OAAO,EAAI,EAAI,IAAI,EAAI,EAAQ,EAAI,IAAI,GACzD,KAAK,CAAC,IAAM,EAAS,6BACrB,OAAO,CAAC,IAAM,GAAW,GAC9B,EAAG,EAAE,EAED,GAEA,CAAA,EAAA,EAAA,CAFS,EAET,EAAC,MAAA,CAAI,UAAU,yDACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,gFAAgF,aAAW,CAAA,CAAA,MAK5G,GAAS,CAAC,EAEV,CAAA,EAAA,CAFgB,CAEhB,GAAA,EAAC,MAAA,CAAI,UAAU,kIACZ,GAAS,YAMd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,uEAA8D,cAG5E,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sCAA6B,2CAK5C,CAAA,EAAA,EAAA,IAAA,EAAC,UAAA,CAAQ,kBAAgB,0BACvB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,GAAG,gBAAgB,UAAU,mBAAU,gBAG3C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qDACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACC,MAAM,gBACN,MAAO,EAAK,OAAO,CACnB,OAAQ,AAAC,GAAM,CAAC,CAAC,EAAE,EAAE,cAAc,CAAC,SAAA,CAAU,GAEhD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAS,MAAM,eAAe,MAAO,EAAK,MAAM,GACjD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAS,MAAM,eAAe,MAAO,EAAK,KAAK,GAChD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAS,MAAM,WAAW,MAAO,EAAK,QAAQ,WAKzD"}