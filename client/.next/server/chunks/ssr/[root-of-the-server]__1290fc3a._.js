module.exports=[24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},46058,(a,b,c)=>{"use strict";function d(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(d=function(a){return a?c:b})(a)}c._=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=d(b);if(c&&c.has(a))return c.get(a);var e={__proto__:null},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(e,g,h):e[g]=a[g]}return e.default=a,c&&c.set(a,e),e}},39118,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={DEFAULT_SEGMENT_KEY:function(){return l},NOT_FOUND_SEGMENT_KEY:function(){return m},PAGE_SEGMENT_KEY:function(){return k},addSearchParamsIfPageSegment:function(){return i},computeSelectedLayoutSegment:function(){return j},getSegmentValue:function(){return f},getSelectedLayoutSegmentPath:function(){return function a(b,c,d=!0,e=[]){let g;if(d)g=b[1][c];else{let a=b[1];g=a.children??Object.values(a)[0]}if(!g)return e;let h=f(g[0]);return!h||h.startsWith(k)?e:(e.push(h),a(g,c,!1,e))}},isGroupSegment:function(){return g},isParallelRouteSegment:function(){return h}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});function f(a){return Array.isArray(a)?a[1]:a}function g(a){return"("===a[0]&&a.endsWith(")")}function h(a){return a.startsWith("@")&&"@children"!==a}function i(a,b){if(a.includes(k)){let a=JSON.stringify(b);return"{}"!==a?k+"?"+a:k}return a}function j(a,b){if(!a||0===a.length)return null;let c="children"===b?a[0]:a[a.length-1];return c===l?null:c}let k="__PAGE__",l="__DEFAULT__",m="/_not-found"},19817,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(31017),f=a.i(81448);let g=()=>f.apiClient.post("/api/auth/refresh",{},{withCredentials:!0}).then(a=>a.data);function h(a){var b;let c;return a?{id:a.id,email:a.email,fullName:a.fullName,role:(b=a.role,"CUSTOMER"===(c=b?.toUpperCase())?"customer":"ADMIN"===c?"admin":"SUPER_ADMIN"===c?"super_admin":"customer"),avatarUrl:a.avatarUrl,createdAt:a.createdAt}:null}let i=(0,c.createContext)(null);function j({children:a}){let j=(0,d.useRouter)(),[k,l]=(0,c.useState)(null),[m,n]=(0,c.useState)(!1),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(null),s=(0,c.useCallback)(a=>{l(a)},[]),t=(0,c.useCallback)(async()=>{try{let a=await g();a.success&&a.accessToken&&a.user&&((0,e.setAccessToken)(a.accessToken,a.expiresIn),l(h(a.user)))}catch{(0,e.clearAccessToken)(),l(null)}},[]);(0,c.useEffect)(()=>((0,e.setOnUnauthorized)(()=>{(0,e.clearAccessToken)(),l(null)}),()=>(0,e.setOnUnauthorized)(null)),[j]),(0,c.useEffect)(()=>{g().then(a=>{a.success&&a.accessToken&&a.user&&((0,e.setAccessToken)(a.accessToken,a.expiresIn),l(h(a.user)))}).catch(()=>{(0,e.clearAccessToken)(),l(null)}).finally(()=>p(!0))},[]);let u=(0,c.useCallback)(async(a,b,c)=>{r(null),n(!0);try{let c,d,g=await (c=a,d=b,f.apiClient.post("/api/auth/login",{email:c,password:d}).then(a=>a.data));g.success&&g.accessToken&&g.user&&((0,e.setAccessToken)(g.accessToken,g.expiresIn),l(h(g.user)))}catch(a){throw r((0,f.toApiError)(a).message??"Login failed"),a}finally{n(!1)}},[]),v=(0,c.useCallback)(async(a,b,c,d)=>{r(null),n(!0);try{let g,i=await (g={fullName:a,email:b,password:c,roleRequest:"admin_request"===d?"admin":void 0},f.apiClient.post("/api/auth/register",g).then(a=>a.data));i.success&&i.accessToken&&i.user&&((0,e.setAccessToken)(i.accessToken,i.expiresIn),l(h(i.user)))}catch(a){throw r((0,f.toApiError)(a).message??"Registration failed"),a}finally{n(!1)}},[]),w=(0,c.useCallback)(async()=>{r(null);try{await f.apiClient.post("/api/auth/logout",{}).then(a=>a.data)}catch{}finally{(0,e.clearAccessToken)(),l(null)}},[]),x=(0,c.useCallback)(async a=>{r(null),n(!0);try{let b;await (b=a,f.apiClient.post("/api/auth/forgot-password",{email:b}).then(a=>a.data))}catch(a){throw r((0,f.toApiError)(a).message??"Request failed"),a}finally{n(!1)}},[]),y=(0,c.useCallback)(async(a,b)=>{r(null),n(!0);try{let c,d;await (c=a,d=b,f.apiClient.post("/api/auth/reset-password",{token:c,newPassword:d}).then(a=>a.data))}catch(a){throw r((0,f.toApiError)(a).message??"Reset failed"),a}finally{n(!1)}},[]),z=(0,c.useCallback)(()=>r(null),[]),A=(0,c.useMemo)(()=>({user:k,isAuthenticated:!!k,isLoading:m,isInitialized:o,login:u,register:v,logout:w,forgotPassword:x,resetPassword:y,refreshUser:t,setUser:s,error:q,clearError:z}),[k,m,o,u,v,w,x,y,t,s,q,z]);return(0,b.jsx)(i.Provider,{value:A,children:a})}function k(){let a=(0,c.useContext)(i);if(!a)throw Error("useAuth must be used within AuthProvider");return a}function l(){let{user:a}=k();return a?.role==="admin"||a?.role==="super_admin"}function m(){let{user:a}=k();return a?.role==="super_admin"}a.s(["AuthProvider",()=>j,"useAuth",()=>k,"useIsAdmin",()=>l,"useIsSuperAdmin",()=>m],19817)},49763,a=>{"use strict";var b=a.i(87924),c=a.i(72131);let d=(0,c.createContext)(null);function e({children:a}){let[e,f]=(0,c.useState)({}),[g,h]=(0,c.useState)(new Set),i=(0,c.useMemo)(()=>Object.values(e).reduce((a,b)=>a+b,0),[e]),j=g.size,k=(0,c.useCallback)((a,b=1)=>{f(c=>({...c,[a]:(c[a]??0)+b}))},[]),l=(0,c.useCallback)(a=>{f(b=>{let c={...b};return delete c[a],c})},[]),m=(0,c.useCallback)((a,b)=>{b<1?f(b=>{let c={...b};return delete c[a],c}):f(c=>({...c,[a]:b}))},[]),n=(0,c.useCallback)(a=>{h(b=>{let c=new Set(b);return c.has(a)?c.delete(a):c.add(a),c})},[]),o=(0,c.useCallback)(a=>g.has(a),[g]),p=(0,c.useCallback)(a=>{k(a,1),h(b=>{let c=new Set(b);return c.delete(a),c})},[k]),q=(0,c.useMemo)(()=>({cart:e,wishlist:g,cartCount:i,wishlistCount:j,addToCart:k,removeFromCart:l,updateQuantity:m,toggleWishlist:n,isInWishlist:o,moveToCart:p}),[e,g,i,j,k,l,m,n,o,p]);return(0,b.jsx)(d.Provider,{value:q,children:a})}function f(){let a=(0,c.useContext)(d);if(!a)throw Error("useShop must be used within ShopProvider");return a}a.s(["ShopProvider",()=>e,"useShop",()=>f])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__1290fc3a._.js.map